!function(t){"use strict";const{abs:e,acos:n,asin:i,atan:r,atan2:o,ceil:l,cos:h,exp:s,floor:a,log:u,hypot:p,max:y,min:c,pow:x,random:g,round:f,sin:w,sqrt:d,tan:m,PI:v}=Math;function B(t=[],e=[]){let n=t.slice(2),i=0,r=0;for(let t=0;t<e.length;t++)i+=n[t]*e[t].x,r+=n[t]*e[t].y;return[i,r,...n]}function b(t){let e=[],n=Array.isArray(t),i=n&&2===t[0].length,r=n&&"object"==typeof t[0]&&!i;if(!r&&"object"==typeof t&&[...t].length>1&&(r="SVGPoint"===(t=[...t])[0].constructor.name),r)return t;if(i)return e=t.map(t=>({x:t[0],y:t[1]})),e;let o="string"==typeof t;if(!o)return console.warn("Couldn't parse point input",typeof t,t),e;t=o?t.trim().replace(/[\n|\r|\t]/g,""):t;let l=o&&(t.startsWith("m")||t.startsWith("M")),h=t.includes("[")&&t.includes("{")&&t.includes("x")&&t.includes("y");if(l)return e=function(t){let e=[],n=!/[csqta]/gi.test(t),i=!!/[vh]/gi.test(t),r=!(!/[l]/gi.test(t)&&!t.startsWith("m"));const o="http://www.w3.org/2000/svg";if(t=t.replaceAll("-"," -"),!n||r||i){let i=document.createElementNS(o,"svg"),r=document.createElementNS(o,"path");r.setAttribute("d",t),i.append(r);let l=new Warp(i),h=n?1/0:3;l.interpolate(h),l.paths.forEach(t=>{let n=t.pathData.map(t=>({x:t.x,y:t.y}));e.push(...n)})}else{let n=(t=t.replace(/[M|L]/g," ")).replaceAll(","," ").split(" ").filter(Boolean).map(Number);for(let t=1,i=n.length;t<i;t+=2)e.push({x:n[t-1],y:n[t]})}return S(e)}(t),e;if(h)try{e=JSON.parse(t)}catch{console.warn("no valid point json")}else e=t.replaceAll(","," ").split(" ").filter(Boolean).map(Number),e=function(t){let e=[];for(let n=1,i=t.length;n<i;n+=2)e.push({x:t[n-1],y:t[n]});return e}(e);return e=S(e),e}function A(t){return t.map(t=>[t.x,t.y].join(" ")).join(" ")}function S(t){let e=[];return t.forEach((n,i)=>{let r=i>0?i-1:t.length-1,o=t[r];n.x===o.x&&o.y===n.y&&e.push(r)}),e.forEach(e=>{t.splice(e,1)}),t}function N(t,n=100,i=100,r=!1,o=!1,l={x:0,y:0,width:0,height:0},h=0){if(!t||t.length<3)return t;let s=JSON.parse(JSON.stringify(t));r&&l.width&&(n=l.width,i=l.height);let a=P(t),u=n/a.width,p=i/a.height,c=a.x,x=a.y;if(r){let t=y(u,p);u=p=t}let g=function(t,n=!0){let i=0;for(let e=0,n=t.length;n&&e<n;e++){let r=t[e===n-1?0:e+1];i+=t[e].x*r.y*.5-r.x*t[e].y*.5}return n?e(i):i}(s,!1);g>0||(s=s.reverse()),s=function(t,e){if(!t||0===t.length)return t;e||(e=P(t));let n={x:e.left,y:e.top},i=0,r=1/0;for(let e=0;e<t.length;e++){let o=W(t[e],n);o<r&&(r=o,i=e)}return t.slice(i).concat(t.slice(0,i))}(s,a),s=s.map(t=>({x:(t.x-c)*u,y:(t.y-x)*p}));let f=P(s),w=(n-f.width)/2-f.x,d=(i-f.height)/2-f.y;return r&&l.width&&(w+=l.x,d+=l.y),r&&o&&(w-=l.x,d-=l.y,l.x=0,l.y=0),s=s.map(t=>({x:t.x+w,y:t.y+d})),f=P(s),h&&(l.x-=h,l.y-=h,l.width+=2*h,l.height+=2*h),{bb:f,rect:r&&l.width?V(s,l):V(s,f),poly:s}}function V(t,e){if(!t||t.length<4)return[];const n=t.length,i=e.width>=e.height,r=a(n/4);let o=n-4*r;const l={x:e.x,y:e.y},h={x:e.x+e.width,y:e.y},s={x:e.x+e.width,y:e.y+e.height},u={x:e.x,y:e.y+e.height};let p=r,y=r,c=r,x=r;i?c+=o:y+=o;const g=[],f=(t,e,n)=>{const i=[];for(let r=0;r<n;r++){const o=r/n;i.push({x:t.x+(e.x-t.x)*o,y:t.y+(e.y-t.y)*o})}return i};return g.push(...f(l,h,p)),g.push(...f(h,s,y)),g.push(...f(s,u,c)),g.push(...f(u,l,x)),g.length>n&&(g.length=n),g}function P(t){let e=t.map(t=>t.x),n=t.map(t=>t.y),i=c(...e),r=y(...e),o=c(...n),l=y(...n);return{x:i,left:i,right:r,y:o,top:o,bottom:l,width:r-i,height:l-o}}function W(t,e){return(e.x-t.x)**2+(e.y-t.y)**2}function E(t,e="",n={}){if(!e)return!1;(n={fitToHull:!1,threshold:1e3,autoViewBox:!1,resetHull:!1,viewBox:{x:0,y:0,width:0,height:0},hullPadding:0,...n}).viewBox.width||(n.autoViewBox=!0);let{viewBox:i,fitToHull:r,autoViewBox:o,resetHull:l,threshold:h,hullPadding:s}=n;"string"==typeof i&&(i=i.split(/[,| ]/).filter(Boolean).map(Number)),Array.isArray(i)&&(i={x:i[0],y:i[1],width:i[1],height:i[2]});const a="http://www.w3.org/2000/svg";if("string"===typeof t&&(t.startsWith("M")||t.startsWith("m"))){let e=document.createElementNS(a,"svg"),r=document.createElementNS(a,"path");r.setAttribute("d",t),e.append(r),document.body.append(e),t=e,i.width||(i=t.getBBox(),console.log(i),n.autoViewBox=!0),t.setAttribute("viewBox",[i.x,i.y,i.width,i.height].join(" "))}new Warp(t).envelope(e,n)}Warp.prototype.envelope=function(t="",{fitToHull:e=!1,threshold:i=1e3,autoViewBox:r=!1,hullPadding:o=0,resetHull:l=!1}={}){if(!t)return!1;let h=this.element,s=h.getBBox(),a=h.getAttribute("viewBox");r&&(s.width=2*s.x+s.width,s.height=2*s.y+s.height);let u=a&&!r?h.viewBox.baseVal:s,{x:p,y:g,width:f,height:w}=u;a||(f+=2*p,w+=2*g);let v=[0,0,f,w].map(t=>+t.toFixed(0));r&&h.setAttribute("viewBox",v.join(" "));let A=N(b(t),f,w,e,r,s,o),{rect:S,poly:V}=A,P=S,W=l?S:V;return this.transform(t=>function(t,e=[]){let i=[],r=[],o=[],l={x:t[0],y:t[1]};for(let t=0;t<e.length;t++){let r=(t+1)%e.length,o=e[t],h=e[r],s=d(x(l.x-o.x,2)+x(l.y-o.y,2)),a=d(x(l.x-h.x,2)+x(l.y-h.y,2)),u=d(x(o.x-h.x,2)+x(o.y-h.y,2)),p=2*s*a,g=(x(s,2)+x(a,2)-x(u,2))/p;i[t]=isNaN(g)?0:n(y(-1,c(g,1)))}for(let t=0;t<e.length;t++){let n=(t>0?t:e.length)-1,o=e[t],h=d(x(o.x-l.x,2)+x(o.y-l.y,2));r[t]=(m(i[n]/2)+m(i[t]/2))/h}let h=r.reduce(function(t,e){return t+e},0);for(let t=0;t<e.length;t++)o[t]=r[t]/h;return[l.x,l.y,...o]}(t,P)),this.interpolate(i),this.transform(t=>B(t,W)),this.getViewBox=()=>v,this.getRect=()=>S,this.getPoly=()=>W,this.getSVG=()=>(new XMLSerializer).serializeToString(h),this.getPathData=()=>function(t){let e="";return t.querySelectorAll("path").forEach(t=>{e+=t.getAttribute("d")}),e}(h),this},"undefined"!=typeof window&&(window.stringifyToPointAtt=A,window.applyWarp=B,window.warpSVG=E),t.PI=v,t.abs=e,t.acos=n,t.applyWarp=B,t.asin=i,t.atan=r,t.atan2=o,t.ceil=l,t.cos=h,t.exp=s,t.floor=a,t.hypot=p,t.log=u,t.max=y,t.min=c,t.pow=x,t.random=g,t.round=f,t.sin=w,t.sqrt=d,t.stringifyToPointAtt=A,t.tan=m,t.warpSVG=E}(this["svg-envelope-warp"]=this["svg-envelope-warp"]||{});
