<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warp SVG</title>

    <link rel="stylesheet" href="demo/css/style.css">

    <style>
        body {
            padding: 3em;
        }

        svg {
            overflow: visible;
            outline: 1px solid #ccc;
        }


        .svgControl {
            outline: 1px solid purple
        }
    </style>

    <!--warp js -->
    <script src="https://cdn.jsdelivr.net/npm/warpjs@1.0.8/dist/warp.js" defer></script>


    <!-- warp envelope helper-->
    <script src="dist/svg-envelope-warp.js" defer></script>


</head>

<body>

    <div class="wrp">


        <svg id="svg" viewBox="0 0 600 300">
            <path id="path"
                d="m 170 70 l -16.9 75.1 l -19.2 -75.1 l -22.3 0 l -19.2 75.1 l -17 -75.1 l -32.6 0 l 32.2 112.6 l 30.7 0 l 17 -70.5 l 17.1 70.5 l 30.7 0 l 32.2 -112.6 l -32.7 0 z m 65.1 0 l -42.3 112.5 l 32.9 0 l 5.6 -16.2 l 44.4 0 l 5.6 16.2 l 32.9 0 l -42.5 -112.6 l -36.4 0 z m 3.9 71 l 14.4 -42.4 l 14.4 42.4 l -28.7 0 z m 178.9 -33.6 c 0 -20.9 -14.2 -37.5 -39.2 -37.5 l -56.4 0 l 0 112.6 l 29 0 l 0 -37.8 l 14.9 0 l 18.9 37.8 l 33.2 0 l -22.9 -41.4 c 10.5 -3.7 22.5 -14.2 22.5 -33.8 z m -43.5 12 l -22.9 0 l 0 -24.1 l 22.9 0 c 7.6 0 14 4.4 14 12 c -0 7.9 -6.4 12.1 -14 12.1 z m 115.9 -49.4 l -56.4 0 l 0 112.6 l 29 0 l 0 -37.8 l 27.3 0 c 25.3 0 39.1 -17.1 39.1 -37.3 c -0 -20.4 -13.8 -37.5 -39.1 -37.5 z m -3.9 49.4 l -23.5 0 l 0 -24.1 l 23.5 0 c 7.8 0 13.5 4.4 13.5 12.1 c -0 7.6 -5.8 12 -13.5 12 z"
                fill="#cccccc" />

            <path id="hullPoly" d="
                M58.25 23.84 a9.63 9.63 0 1 1-19.25 0 9.63 9.63 0 1 1 19.25 0
                " stroke="green" fill="transparent" />

            <!-- 


M58.25,23.84 57.494,27.587 55.431,30.647 52.371,32.71 48.624,33.466 44.877,32.71 41.817,30.647 39.754,27.587 
                38.998,23.84 39.754,20.093 41.817,17.034 44.877,14.971 48.624,14.214 52.371,14.971 55.431,17.034 57.494,20.093 58.25,23.84 z


            <polygon id="hullPoly"
                points="76.64547376808547 -83.14654779929344 209.39654779929347 -159.79202156737858 362.68749533546406 -159.79202156737858 495.4385693666721 -83.14654779929344 572.0899658203125 49.60452623191489 572.0899658203125 202.89547376808514 495.4385693666721 335.6465477992935 362.68749533546406 412.2920215673786 209.39654779929347 412.2920215673786 76.64547376808547 335.6465477992935 0 202.89547376808514 0 49.60452623191489"
                stroke="green" fill="transparent"></polygon>
                                -->


        </svg>


    </div>

    <script>

        window.addEventListener('DOMContentLoaded', () => {


            let viewBox = svg.viewBox.baseVal;
            viewBox = '0,0  600 300';
            let patData = path.getAttribute('d')
            //let envelope = [...hullPoly.points];
            let envelope = hullPoly.getAttribute('d');

            let options = {
                fitToHull: true,
                threshold: 1000,
                viewBox,
                //autoViewBox: true
            };

            //let pathDataWarped = warpSVG(patData, envelope, viewBox, options)
            let pathDataWarped = warpSVG(patData, envelope, options)


        })


    </script>


</body>

</html>